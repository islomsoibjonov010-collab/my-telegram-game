<!DOCTYPE html>
<html>
<head>
    <title>To'pcha Sakroq</title>
    <style>
        body {
            margin: 0;
            padding: 10px;
            background: #87CEEB;
            text-align: center;
            font-family: Arial;
            overflow: hidden;
        }
        .game-container {
            width: 300px;
            height: 500px;
            background: linear-gradient(to bottom, #87CEEB, #98FB98);
            margin: 10px auto;
            position: relative;
            border: 3px solid #333;
            border-radius: 10px;
            overflow: hidden;
        }
        .ball {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, #FF6B6B, #C00);
            border-radius: 50%;
            bottom: 50px;
            left: 130px;
            transition: bottom 0.2s;
        }
        .platform {
            position: absolute;
            width: 80px;
            height: 15px;
            background: linear-gradient(to right, #4ECDC4, #556270);
            border-radius: 10px;
        }
        .score {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 10px;
        }
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #333;
        }
        button {
            background: #FFD93D;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üéÆ To'pcha Sakroq</h1>
    <div class="score">Ball: <span id="score">0</span></div>
    
    <div class="game-container" id="gameContainer">
        <div class="ball" id="ball"></div>
        <!-- Platformalar shu yerga paydo bo'ladi -->
    </div>
    
    <br>
    <button onclick="startGame()">üéÆ Boshlash</button>
    <button onclick="jump()">‚¨ÜÔ∏è Sakrash</button>

    <script>
        let score = 0;
        let gameActive = false;
        let ballBottom = 50;
        let ballVelocity = 0;
        let gravity = 0.5;
        let platforms = [];
        let gameSpeed = 3;

        function startGame() {
            gameActive = true;
            score = 0;
            ballBottom = 50;
            ballVelocity = 0;
            platforms = [];
            gameSpeed = 3;
            
            document.getElementById('score').textContent = '0';
            document.getElementById('gameContainer').innerHTML = '<div class="ball" id="ball"></div>';
            
            // Birinchi platforma
            createPlatform(150);
            
            // O'yin loop
            gameLoop();
        }

        function createPlatform(bottom) {
            const platform = document.createElement('div');
            platform.className = 'platform';
            platform.style.bottom = bottom + 'px';
            platform.style.left = Math.random() * 220 + 'px'; // Tasodifiy joy
            
            document.getElementById('gameContainer').appendChild(platform);
            platforms.push({
                element: platform,
                bottom: bottom
            });
        }

        function jump() {
            if (gameActive && ballBottom <= 100) {
                ballVelocity = 12; // Sakrash kuchi
            }
        }

        function gameLoop() {
            if (!gameActive) return;

            // To'p fizikasi
            ballVelocity -= gravity;
            ballBottom += ballVelocity;
            
            // Zamindan o'tmaslik
            if (ballBottom < 0) {
                ballBottom = 0;
                ballVelocity = 0;
            }
            
            // To'pni yangilash
            document.getElementById('ball').style.bottom = ballBottom + 'px';
            
            // Platformalarni ko'tarish
            platforms.forEach((platform, index) => {
                platform.bottom += gameSpeed;
                platform.element.style.bottom = platform.bottom + 'px';
                
                // To'p platformaga tushsa
                if (platform.bottom <= ballBottom + 40 && 
                    platform.bottom >= ballBottom + 30 &&
                    parseInt(platform.element.style.left) <= 130 &&
                    parseInt(platform.element.style.left) + 80 >= 130) {
                    
                    ballBottom = platform.bottom - 40;
                    ballVelocity = 0;
                    score++;
                    document.getElementById('score').textContent = score;
                    
                    // Tezlik oshishi
                    if (score % 5 === 0) {
                        gameSpeed += 0.5;
                    }
                }
                
                // Platforma tepaga chiqib ketsa
                if (platform.bottom > 500) {
                    platform.element.remove();
                    platforms.splice(index, 1);
                    createPlatform(0); // Yangi platforma
                }
            });
            
            // To'p pastga tushib ketsa
            if (ballBottom > 500) {
                endGame();
                return;
            }
            
            requestAnimationFrame(gameLoop);
        }

        function endGame() {
            gameActive = false;
            
            const gameOver = document.createElement('div');
            gameOver.className = 'game-over';
            gameOver.innerHTML = `
                <h2>üòî O'yin Tugadi!</h2>
                <p>Ball: <b>${score}</b></p>
                <button onclick="startGame()">üîÑ Qayta Boshlash</button>
            `;
            
            document.getElementById('gameContainer').appendChild(gameOver);
        }

        // Klaviatura boshqaruvi
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'ArrowUp') {
                jump();
            }
        });

        // Boshlang'ich holat
        startGame();
    </script>
</body>
</html>
